"use strict";
var __cov_ojMzLKEhp096VBi77fTX9w = (Function('return this'))();
if (!__cov_ojMzLKEhp096VBi77fTX9w.__coverage__) { __cov_ojMzLKEhp096VBi77fTX9w.__coverage__ = {}; }
__cov_ojMzLKEhp096VBi77fTX9w = __cov_ojMzLKEhp096VBi77fTX9w.__coverage__;
if (!(__cov_ojMzLKEhp096VBi77fTX9w['app/controllers/scan-controller.js'])) {
   __cov_ojMzLKEhp096VBi77fTX9w['app/controllers/scan-controller.js'] = {"path":"app/controllers/scan-controller.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":16,"loc":{"start":{"line":16,"column":21},"end":{"line":16,"column":41}}},"2":{"name":"(anonymous_2)","line":32,"loc":{"start":{"line":32,"column":41},"end":{"line":32,"column":63}}},"3":{"name":"(anonymous_3)","line":47,"loc":{"start":{"line":47,"column":23},"end":{"line":47,"column":48}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":14,"column":28}},"2":{"start":{"line":16,"column":0},"end":{"line":74,"column":2}},"3":{"start":{"line":17,"column":5},"end":{"line":17,"column":52}},"4":{"start":{"line":18,"column":5},"end":{"line":18,"column":25}},"5":{"start":{"line":20,"column":5},"end":{"line":23,"column":42}},"6":{"start":{"line":25,"column":5},"end":{"line":27,"column":6}},"7":{"start":{"line":26,"column":10},"end":{"line":26,"column":42}},"8":{"start":{"line":28,"column":5},"end":{"line":30,"column":6}},"9":{"start":{"line":29,"column":10},"end":{"line":29,"column":32}},"10":{"start":{"line":32,"column":5},"end":{"line":72,"column":8}},"11":{"start":{"line":33,"column":7},"end":{"line":33,"column":46}},"12":{"start":{"line":34,"column":10},"end":{"line":38,"column":11}},"13":{"start":{"line":35,"column":15},"end":{"line":37,"column":18}},"14":{"start":{"line":45,"column":20},"end":{"line":64,"column":23}},"15":{"start":{"line":48,"column":25},"end":{"line":48,"column":59}},"16":{"start":{"line":49,"column":25},"end":{"line":63,"column":26}},"17":{"start":{"line":50,"column":30},"end":{"line":58,"column":33}},"18":{"start":{"line":60,"column":30},"end":{"line":62,"column":33}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":5},"end":{"line":25,"column":5}},{"start":{"line":25,"column":5},"end":{"line":25,"column":5}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":5},"end":{"line":28,"column":5}},{"start":{"line":28,"column":5},"end":{"line":28,"column":5}}]},"3":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":10},"end":{"line":34,"column":10}},{"start":{"line":34,"column":10},"end":{"line":34,"column":10}}]},"4":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":25},"end":{"line":49,"column":25}},{"start":{"line":49,"column":25},"end":{"line":49,"column":25}}]}}};
}
__cov_ojMzLKEhp096VBi77fTX9w = __cov_ojMzLKEhp096VBi77fTX9w['app/controllers/scan-controller.js'];
__cov_ojMzLKEhp096VBi77fTX9w.s['1']++;var _=require('underscore'),Request=require('../models/request'),permissions={free:require('../api-requests/permissions/free'),paid:require('../api-requests/permissions/paid')},Scan=require('../models/scan'),Activity=require('../models/activity'),plans=require('../config/secrets').stripeOptions.planData,fs=require('fs'),utils=require('../utils'),path=require('path');__cov_ojMzLKEhp096VBi77fTX9w.s['2']++;exports.getDefault=function(req,res){__cov_ojMzLKEhp096VBi77fTX9w.f['1']++;__cov_ojMzLKEhp096VBi77fTX9w.s['3']++;console.log('dashboard-controller Permission');__cov_ojMzLKEhp096VBi77fTX9w.s['4']++;var user=req.user;__cov_ojMzLKEhp096VBi77fTX9w.s['5']++;var form={},error=null,formFlash=req.flash('form'),errorFlash=req.flash('error');__cov_ojMzLKEhp096VBi77fTX9w.s['6']++;if(formFlash.length){__cov_ojMzLKEhp096VBi77fTX9w.b['1'][0]++;__cov_ojMzLKEhp096VBi77fTX9w.s['7']++;form.email=formFlash[0].email;}else{__cov_ojMzLKEhp096VBi77fTX9w.b['1'][1]++;}__cov_ojMzLKEhp096VBi77fTX9w.s['8']++;if(errorFlash.length){__cov_ojMzLKEhp096VBi77fTX9w.b['2'][0]++;__cov_ojMzLKEhp096VBi77fTX9w.s['9']++;error=errorFlash[0];}else{__cov_ojMzLKEhp096VBi77fTX9w.b['2'][1]++;}__cov_ojMzLKEhp096VBi77fTX9w.s['10']++;utils.getScans(Request,Scan,user,function(err,scans){__cov_ojMzLKEhp096VBi77fTX9w.f['2']++;__cov_ojMzLKEhp096VBi77fTX9w.s['11']++;console.log('scans',scans.list.length);__cov_ojMzLKEhp096VBi77fTX9w.s['12']++;if(err!==null){__cov_ojMzLKEhp096VBi77fTX9w.b['3'][0]++;__cov_ojMzLKEhp096VBi77fTX9w.s['13']++;res.render('errors',{msg:'We had problems locating your plan type, please try again later.'});}else{__cov_ojMzLKEhp096VBi77fTX9w.b['3'][1]++;}__cov_ojMzLKEhp096VBi77fTX9w.s['14']++;utils.findSomeBy(Activity,{oid:user.oid},function(err,activity){__cov_ojMzLKEhp096VBi77fTX9w.f['3']++;__cov_ojMzLKEhp096VBi77fTX9w.s['15']++;console.log('ACTIVITY',activity);__cov_ojMzLKEhp096VBi77fTX9w.s['16']++;if(activity){__cov_ojMzLKEhp096VBi77fTX9w.b['4'][0]++;__cov_ojMzLKEhp096VBi77fTX9w.s['17']++;res.render(req.render,{permissions:permissions[user.plan],activity:activity[0],user:user,form:form,error:error,scans:scans,plans:plans});}else{__cov_ojMzLKEhp096VBi77fTX9w.b['4'][1]++;__cov_ojMzLKEhp096VBi77fTX9w.s['18']++;res.render('errors',{msg:'We had problems locating your history please try again later.'});}});});};
