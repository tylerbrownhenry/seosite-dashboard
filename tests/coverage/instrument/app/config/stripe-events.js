"use strict";
var __cov_075HeH56i5fNv8ZxFDWa0A = (Function('return this'))();
if (!__cov_075HeH56i5fNv8ZxFDWa0A.__coverage__) { __cov_075HeH56i5fNv8ZxFDWa0A.__coverage__ = {}; }
__cov_075HeH56i5fNv8ZxFDWa0A = __cov_075HeH56i5fNv8ZxFDWa0A.__coverage__;
if (!(__cov_075HeH56i5fNv8ZxFDWa0A['app/config/stripe-events.js'])) {
   __cov_075HeH56i5fNv8ZxFDWa0A['app/config/stripe-events.js'] = {"path":"app/config/stripe-events.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"b":{"1":[0,0],"2":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":65,"loc":{"start":{"line":65,"column":34},"end":{"line":65,"column":54}}},"2":{"name":"(anonymous_2)","line":191,"loc":{"start":{"line":191,"column":33},"end":{"line":191,"column":59}}},"3":{"name":"(anonymous_3)","line":198,"loc":{"start":{"line":198,"column":43},"end":{"line":198,"column":69}}},"4":{"name":"(anonymous_4)","line":205,"loc":{"start":{"line":205,"column":40},"end":{"line":205,"column":66}}},"5":{"name":"(anonymous_5)","line":214,"loc":{"start":{"line":214,"column":17},"end":{"line":214,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":9,"column":21}},"2":{"start":{"line":11,"column":0},"end":{"line":62,"column":2}},"3":{"start":{"line":64,"column":0},"end":{"line":69,"column":1}},"4":{"start":{"line":65,"column":5},"end":{"line":68,"column":6}},"5":{"start":{"line":66,"column":10},"end":{"line":66,"column":66}},"6":{"start":{"line":67,"column":10},"end":{"line":67,"column":32}},"7":{"start":{"line":191,"column":0},"end":{"line":196,"column":2}},"8":{"start":{"line":193,"column":5},"end":{"line":193,"column":57}},"9":{"start":{"line":194,"column":5},"end":{"line":194,"column":33}},"10":{"start":{"line":195,"column":5},"end":{"line":195,"column":34}},"11":{"start":{"line":198,"column":0},"end":{"line":203,"column":2}},"12":{"start":{"line":200,"column":5},"end":{"line":200,"column":67}},"13":{"start":{"line":201,"column":5},"end":{"line":201,"column":33}},"14":{"start":{"line":202,"column":5},"end":{"line":202,"column":34}},"15":{"start":{"line":205,"column":0},"end":{"line":210,"column":2}},"16":{"start":{"line":207,"column":5},"end":{"line":207,"column":64}},"17":{"start":{"line":208,"column":5},"end":{"line":208,"column":33}},"18":{"start":{"line":209,"column":5},"end":{"line":209,"column":34}},"19":{"start":{"line":214,"column":0},"end":{"line":221,"column":1}},"20":{"start":{"line":215,"column":5},"end":{"line":215,"column":58}},"21":{"start":{"line":216,"column":5},"end":{"line":220,"column":6}},"22":{"start":{"line":217,"column":10},"end":{"line":217,"column":60}},"23":{"start":{"line":219,"column":10},"end":{"line":219,"column":59}}},"branchMap":{"1":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":5},"end":{"line":216,"column":5}},{"start":{"line":216,"column":5},"end":{"line":216,"column":5}}]},"2":{"line":216,"type":"binary-expr","locations":[{"start":{"line":216,"column":9},"end":{"line":216,"column":24}},{"start":{"line":216,"column":28},"end":{"line":216,"column":48}},{"start":{"line":216,"column":52},"end":{"line":216,"column":85}}]}}};
}
__cov_075HeH56i5fNv8ZxFDWa0A = __cov_075HeH56i5fNv8ZxFDWa0A['app/config/stripe-events.js'];
__cov_075HeH56i5fNv8ZxFDWa0A.s['1']++;var User=require('../models/user'),stripeWebhooksConsumer=require('../controllers/stripe/stripe-webhooks-consumer'),utils=require('../utils').findUser,publisher=require('../amqp/publisher'),findUser=utils.findUser,updateUser=utils.updateUser,knownEvents={};__cov_075HeH56i5fNv8ZxFDWa0A.s['2']++;var eventNames=['account.updated','account.application.deauthorized','application_fee.created','application_fee.refunded','balance.available','charge.succeeded','charge.failed','charge.refunded','charge.captured','charge.updated','charge.dispute.created','charge.dispute.updated','charge.dispute.closed','customer.created','customer.updated','customer.deleted','customer.card.created','customer.card.updated','customer.card.deleted','customer.source.created','customer.subscription.created','customer.subscription.deleted','customer.subscription.updated','customer.subscription.trial_will_end','customer.discount.created','customer.discount.updated','customer.discount.deleted','invoice.created','invoice.updated','invoice.payment_succeeded','invoice.payment_failed','invoiceitem.created','invoiceitem.updated','invoiceitem.deleted','plan.created','plan.updated','plan.deleted','coupon.created','coupon.deleted','recipient.created','recipient.updated','recipient.deleted','transfer.created','transfer.updated','transfer.paid','transfer.failed','ping'];__cov_075HeH56i5fNv8ZxFDWa0A.s['3']++;for(var i=0,leng=eventNames.length;i<leng;i++){__cov_075HeH56i5fNv8ZxFDWa0A.s['4']++;knownEvents[eventNames[i]]=function(req,res){__cov_075HeH56i5fNv8ZxFDWa0A.f['1']++;__cov_075HeH56i5fNv8ZxFDWa0A.s['5']++;console.log(req.stripeEvent.type+': event processed');__cov_075HeH56i5fNv8ZxFDWa0A.s['6']++;res.status(200).end();};}__cov_075HeH56i5fNv8ZxFDWa0A.s['7']++;knownEvents['invoice.created']=function(req,res,next){__cov_075HeH56i5fNv8ZxFDWa0A.f['2']++;__cov_075HeH56i5fNv8ZxFDWa0A.s['8']++;console.log('stripe-events.js - > invoice.created');__cov_075HeH56i5fNv8ZxFDWa0A.s['9']++;stripeWebhooksConsumer(req);__cov_075HeH56i5fNv8ZxFDWa0A.s['10']++;return res.status(200).end();};__cov_075HeH56i5fNv8ZxFDWa0A.s['11']++;knownEvents['invoice.payment_succeeded']=function(req,res,next){__cov_075HeH56i5fNv8ZxFDWa0A.f['3']++;__cov_075HeH56i5fNv8ZxFDWa0A.s['12']++;console.log('stripe-events.js - > invoice.payment_succeeded');__cov_075HeH56i5fNv8ZxFDWa0A.s['13']++;stripeWebhooksConsumer(req);__cov_075HeH56i5fNv8ZxFDWa0A.s['14']++;return res.status(200).end();};__cov_075HeH56i5fNv8ZxFDWa0A.s['15']++;knownEvents['invoice.payment_failed']=function(req,res,next){__cov_075HeH56i5fNv8ZxFDWa0A.f['4']++;__cov_075HeH56i5fNv8ZxFDWa0A.s['16']++;console.log('stripe-events.js - > invoice.payment_failed');__cov_075HeH56i5fNv8ZxFDWa0A.s['17']++;stripeWebhooksConsumer(req);__cov_075HeH56i5fNv8ZxFDWa0A.s['18']++;return res.status(200).end();};__cov_075HeH56i5fNv8ZxFDWa0A.s['19']++;module.exports=function(req,res,next){__cov_075HeH56i5fNv8ZxFDWa0A.f['5']++;__cov_075HeH56i5fNv8ZxFDWa0A.s['20']++;console.log('req.stripeEvent',req.stripeEvent.type);__cov_075HeH56i5fNv8ZxFDWa0A.s['21']++;if((__cov_075HeH56i5fNv8ZxFDWa0A.b['2'][0]++,req.stripeEvent)&&(__cov_075HeH56i5fNv8ZxFDWa0A.b['2'][1]++,req.stripeEvent.type)&&(__cov_075HeH56i5fNv8ZxFDWa0A.b['2'][2]++,knownEvents[req.stripeEvent.type])){__cov_075HeH56i5fNv8ZxFDWa0A.b['1'][0]++;__cov_075HeH56i5fNv8ZxFDWa0A.s['22']++;knownEvents[req.stripeEvent.type](req,res,next);}else{__cov_075HeH56i5fNv8ZxFDWa0A.b['1'][1]++;__cov_075HeH56i5fNv8ZxFDWa0A.s['23']++;return next(new Error('Stripe Event not found'));}};
